<ion-content fullscreen="true" slot="fixed">
  <div *ngIf="fetching; else showContentBlock">
    <ion-spinner class="myLoadingCenter" style="transform: scale(5);" name="bubbles"></ion-spinner>
  </div>
  <ng-template #showContentBlock>
    <div style="padding-top: 10px; background: #0d0d0d;">
      <h3>Friends</h3>
      <ion-list style="background: #0d0d0d;" *ngFor="let friend of friends;">
        <ion-item class="sleeper" style="background: #0d0d0d; margin-left: auto; margin-right: auto;
                       color: white; padding-top: 0px; margin-top: -16px;">
            <ion-avatar (click)="goToProfilePage(friend.id)">
              <img alt="avatar" src="{{(imageApi+friend.profilePic)}}"/>
            </ion-avatar>
            <ion-label style="padding-left: 15px" (click)="goToProfilePage(friend.id)">{{friend.username}}</ion-label>
            <div [innerHTML]="setBadge(friend.lastActedAt) | safeHtml">
              <!--            <ion-badge style="margin-right: 15px" [color]="getBadgeColor(sleeper.lastActedAt)">{{getBadgeText(sleeper.lastActedAt)}}</ion-badge>-->
            </div>
          <div (click)="unfriend(friend.id, friend.username)">
            <ion-badge color="danger" style="margin-right: 10px">
              <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" preserveAspectRatio="xMidYMid meet"
                   viewBox="0 0 512 512">
                <path fill="currentColor"
                      d="M288 256c52.79 0 99.43-49.71 104-110.82c2.27-30.7-7.36-59.33-27.12-80.6C345.33 43.57 318 32 288 32c-30.24 0-57.59 11.5-77 32.38c-19.63 21.11-29.2 49.8-27 80.78C188.49 206.28 235.12 256 288 256Zm207.38 183.76c-8.44-46.82-34.79-86.15-76.19-113.75C382.42 301.5 335.83 288 288 288s-94.42 13.5-131.19 38c-41.4 27.6-67.75 66.93-76.19 113.75c-1.93 10.73.69 21.34 7.19 29.11A30.94 30.94 0 0 0 112 480h352a30.94 30.94 0 0 0 24.21-11.13c6.48-7.77 9.1-18.38 7.17-29.11ZM144 216H32a16 16 0 0 0 0 32h112a16 16 0 0 0 0-32Z"/>
              </svg>
            </ion-badge>
          </div>
        </ion-item>
      </ion-list>

      <h3>Sleepers</h3>
      <ion-list style="background: #0d0d0d;" *ngFor="let sleeper of sleepers;">
        <ion-item class="sleeper" style="background: #0d0d0d; margin-left: auto; margin-right: auto;
                       color: white; padding-top: 0px; margin-top: -16px;"
                  >
          <ion-avatar (click)="goToProfilePage(sleeper.id)">
            <img alt="avatar" src="{{(imageApi+sleeper.profilePic)}}"/>
          </ion-avatar>
          <ion-label style="padding-left: 15px" (click)="goToProfilePage(sleeper.id)">{{sleeper.username}}</ion-label>
          <div [innerHTML]="setBadge(sleeper.lastActedAt) | safeHtml">
            <!--            <ion-badge style="margin-right: 15px" [color]="getBadgeColor(sleeper.lastActedAt)">{{getBadgeText(sleeper.lastActedAt)}}</ion-badge>-->
          </div>
          <div (click)="addFriend(sleeper.id, sleeper.username)">
            <ion-badge style="margin-right: 10px">
              <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" preserveAspectRatio="xMidYMid meet"
                   viewBox="0 0 24 24">
                <path fill="currentColor"
                      d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4s-4 1.79-4 4s1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
              </svg>
            </ion-badge>
          </div>
        </ion-item>
      </ion-list>
    </div>
    <ion-infinite-scroll style="background: #0d0d0d; color: grey;" (ionInfinite)="doInfinite($event)">
      <ion-infinite-scroll-content loadingText="Please wait..." loadingSpinner="bubbles"></ion-infinite-scroll-content>
    </ion-infinite-scroll>
  </ng-template>
</ion-content>

<ion-footer class="my-footer" translucent no-border>
  <ion-button color="light" class="ion-no-padding ion-float-left backbutton"
              style=" width: 95px; height: 35px; margin: 10px; margin-top: 7px; padding: 0px"
              (click)="goBack()">
    <svg class="ion-no-padding" slot="start" xmlns="http://www.w3.org/2000/svg"
         width="2.5em" height="2.5em"
         preserveAspectRatio="xMidYMid meet"
         viewBox="0 0 24 24">
      <path fill="white"
            d="M15.125 21.1L6.7 12.7q-.15-.15-.212-.325q-.063-.175-.063-.375t.063-.375q.062-.175.212-.325l8.425-8.425q.35-.35.875-.35t.9.375q.375.375.375.875t-.375.875L9.55 12l7.35 7.35q.35.35.35.862q0 .513-.375.888t-.875.375q-.5 0-.875-.375Z"/>
    </svg>&nbsp;Back&nbsp;
  </ion-button>
</ion-footer>
